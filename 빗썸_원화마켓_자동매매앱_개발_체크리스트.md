# 빗썸 원화마켓 자동매매 앱 개발 체크리스트
> **목표**: 빗썸 **원화(KRW) 마켓 전용** 자동매매앱을 24/7 **클라우드 PC**에서 운용.  
> **원칙**: **실거래 데이터만** 사용(목업/모의 데이터 **금지**), 신규 상장/상폐 **자동 반영**, **단일 전략**으로 고승률·고수익 지향.  
> **필수 기능**: 실시간 동기화 · 자동주문 · 수익률 분석 · 백테스트(실데이터 기반) · 단순 명확한 UI.

---

## 0) 요구사항 요약 체크
- [ ] 거래소: **빗썸 KRW 마켓 전용**
- [ ] 데이터 정책: **실거래 데이터만 사용(목업/모의 금지)**
- [ ] 실행 환경: **클라우드 PC 24/7 상시 구동**
- [ ] 전략: **단일 전략(고승률·고수익)** 1개로 집중 운영
- [ ] 기능: **종목 자동 동기화**, **자동주문**, **수익률 분석(일/주/월)**, **백테스트(실데이터 기반)**, **간결한 UI**

---

## 1) 사전 준비 & 인프라
- [ ] **클라우드 PC 준비**(항시 켜짐, 재부팅 자동 복구 정책)
  - [ ] OS 보안 업데이트/방화벽/포트 제한
  - [ ] 타임존/시간 동기화(NTP) 설정
- [ ] **런타임/도구**
  - [ ] Python 3.11+ / Node(웹UI 시) / Git
  - [ ] 가상환경(venv/poetry) / 패키지 핀(Pipfile/poetry.lock)
- [ ] **비밀정보 관리**
  - [ ] 빗썸 **API Key/Secret** 발급
  - [ ] .env/환경변수/비밀 금고(예: keyring, cloud secret)로 보관
  - [ ] 권한 최소화(읽기/거래 범위만)
- [ ] **필수 라이브러리**
  - [ ] HTTP/WebSocket 클라이언트(`requests`, `websockets` 등)
  - [ ] 시계열/지표: `pandas`, `numpy`, (옵션) `ta`/`TA-Lib`
  - [ ] 거래소 SDK: `ccxt` 또는 전용 라이브러리
  - [ ] DB/ORM: `sqlite3`/`SQLAlchemy`
  - [ ] 로깅/스케줄/알림: `logging`, `schedule`, Telegram/Slack webhook
- [ ] **데이터베이스 스키마 설계**
  - [ ] `markets`(종목코드, 한글/영문명, 경고/상태, 업데이트시각)
  - [ ] `trades`(주문ID, 종목, 사이드, 수량, 가격, 수수료, 체결시각)
  - [ ] `positions`(종목, 보유수량, 평균단가, 진입시각, 상태)
  - [ ] `pnl_daily`(날짜, 일손익, 일수익률, 누적자산, MDD 등)
  - [ ] `configs`(전략 파라미터/리스크 한도), `logs`
- [ ] **프로세스 관리 & 모니터링**
  - [ ] Supervisor/systemd 구성(자동 재시작, 헬스체크)
  - [ ] 로그 로테이션/보관, 장애 알림(텔레그램/이메일)
  - [ ] 원격 접속/대시보드 접근 제어(역프록시/기본인증/TLS)

---

## 2) 실시간 **종목 자동 동기화**
- [ ] **마켓 목록 API**로 전체 종목 조회
- [ ] **KRW 마켓만 필터링**(`KRW-` 접두)
- [ ] **신규 상장 자동 추가**(주기적 동기화: 예 10분)
- [ ] **상장폐지 자동 제거**, 보유 포지션 정리 로직 포함
- [ ] **투자유의/경보 상태 반영**(거래 금지/경고 표시)
- [ ] 동기화는 **thread-safe** 하게, 변경 이벤트 **로그 및 UI 갱신**
- [ ] 네트워크/호출 실패 시 백오프 재시도 & 알림

---

## 3) **단일 전략** 정의(권장: 추세 추종 + RSI/거래량 필터)
> 예시 전략: **EMA(20/60) 교차 + RSI(14) 필터 + ATR 기반 리스크 관리**  
> — 단일·직관·실전성 높은 조합, 파라미터 튜닝 용이

- [ ] **진입 규칙(매수)**
  - [ ] EMA20이 EMA60 **상향 돌파**
  - [ ] RSI 50~70 사이(과열/과매도 회피), 최근 n봉 **거래량 평균 이상**
- [ ] **청산 규칙(매도)**
  - [ ] EMA20이 EMA60 **하향 이탈** 또는
  - [ ] **목표수익률** 도달 시 분할 익절, **ATR 트레일링 스탑** 동작
- [ ] **리스크 관리**
  - [ ] 1회 진입 금액: 총자본의 **x%**(예: 3~5%)
  - [ ] 동시 보유 종목 **최대 k개** 제한
  - [ ] **손절라인**: 진입가 대비 -y% 또는 ATR*z 배
  - [ ] **슬리피지/수수료** 가정값 유지(백테스트/실거래 일관)
- [ ] **파라미터(초기값)**
  - [ ] EMA: 20 / 60, RSI: 14(과매도 30·과매수 70), ATR: 14
  - [ ] 목표수익률/손절률/트레일링폭 초기 설정
- [ ] **전략 모듈 구현**
  - [ ] 캔들/지표 계산(초기 warm-up 처리)
  - [ ] `BUY`/`SELL`/`HOLD` 신호 반환
  - [ ] 지표/신호/상태를 **로그 & UI 디버그 패널**에 노출
- [ ] **워크스루 테스트**
  - [ ] 최근 실시간 데이터로 단위 테스트(엣지 케이스 포함)
  - [ ] 신호/주문 연결 통합 확인

---

## 4) 자동주문 **실행 & 체결 관리**
- [ ] **사전 점검**
  - [ ] **계좌 잔고/가능액** 조회(최소주문 조건 확인)
  - [ ] 보유 포지션/리스크 한도 체크(중복 진입 방지)
- [ ] **주문 구성**
  - [ ] **시장가**: 신속 체결(급변 시)
  - [ ] **지정가**: 슬리피지 최소화(가격 오프셋 정책)
  - [ ] 수량 산식: 예) (할당 KRW) / (현재가) × 체결여유계수
- [ ] **주문 실행**
  - [ ] API 응답 **주문ID(uuid)** 저장
  - [ ] **부분 체결**/미체결 모니터링(타임아웃/취소/재주문 로직)
  - [ ] 체결 완료 시 `trades`·`positions` 갱신
- [ ] **예외 처리 & 안정성**
  - [ ] API 실패/지연: **지수백오프** 재시도, 한도 초과 시 대기
  - [ ] 네트워크 오류: 단절 감지, 재연결, 알림
  - [ ] 프로세스 비정상 종료: 자동 재시작/미체결 복구
- [ ] **로그/감사 추적**
  - [ ] 주문·체결·에러 **구체 로그**
  - [ ] CSV/DB 백업 및 주기적 내보내기

---

## 5) **수익률 분석**(실거래 기반)
- [ ] **거래별 PnL** 계산(수수료 포함, 승/패 태깅)
- [ ] **일/주/월 손익·수익률** 집계
- [ ] **누적 자산 곡선(Equity Curve)** 산출
- [ ] **핵심 지표**: 승률, 기대값, 수익요인(Profit Factor), MDD, 평균보유기간, 거래횟수
- [ ] **대시보드 요약**: 오늘/주간/월간 수익, 누적수익률, 승률
- [ ] **보고서(옵션)**: 주간/월간 리포트 자동 생성·알림

---

## 6) **백테스트**(실데이터만)
- [ ] **과거 캔들 수집**(일봉/분봉; 기간 충분히 확보)
- [ ] **엔진**: 실전 전략 그대로 적용(수수료/슬리피지 동일)
- [ ] **성과**: 총/연환산 수익률, 승률, PF, MDD, 거래수, 평균PnL
- [ ] **시각화**: 누적자산/일별 손익 그래프
- [ ] **튜닝**: 파라미터 그리드 서치 → **과적합 방지**
  - [ ] 워크포워드/기간 분할, OOS(검증구간) 성능 확인
- [ ] 결과가 기준 미달이면 **실전 투입 보류/개선**

---

## 7) **UI/UX**(단순·명확)
- [ ] **상단 요약**: 총자산, 누적수익률, 오늘/주/월 손익
- [ ] **종목 목록**: KRW 코인 리스트(현재가/등락/보유여부/경고)
- [ ] **차트 패널**: 선택 종목 캔들 + EMA/RSI/거래량
- [ ] **거래/포지션 테이블**: 시간, 종목, 사이드, 수량, 가격, 수수료, 손익
- [ ] **전략 설정 패널**: 파라미터 수정, 저장/적용
- [ ] **컨트롤**: Trading **Pause/Resume**, **Sell All(긴급 청산)**
- [ ] **권한/보안**: 인증(세션/토큰), HTTPS(역프록시), 접근제어

---

## 8) **운영·리스크 관리**
- [ ] **자금 한도**: 포지션당 x%, 총사용 y% 상한
- [ ] **동시 진입 제한**: 최대 k종목
- [ ] **Rate Limit** 준수(호출 빈도 제어)
- [ ] **알림 규칙**: 대형 체결/잔고 변동/오류 즉시 통지
- [ ] **백업**: DB/설정 주기 백업, 롤백 플랜
- [ ] **변경관리**: 버전 태깅, 배포 체크리스트, 롤백 스위치
- [ ] **장애훈련**: 네트워크 단절/거래소 오류 **가상 리허설**

---

## 9) **릴리즈 로드맵(권장)**
- [ ] **v0.1**: 마켓 동기화 + 기본 전략 신호 출력(주문 미실행)
- [ ] **v0.2**: 소액 **실거래** 주문/체결 기록, 기본 PnL 계산
- [ ] **v0.3**: 일/주/월 수익 통계 + 대시보드
- [ ] **v0.4**: 백테스트 모듈(실데이터), 리포트 자동화
- [ ] **v1.0**: 파라미터 튜닝, 트레일링/분할, 안정화/알림 완비

---

### 부록 A) **실전 테스트 원칙**(목업 금지 운영 가이드)
- [ ] 테스트는 **항상 실자산**(이벤트 수령 자산)으로만 수행
- [ ] 1회 주문 **금액 상한** 설정(초기 리스크 최소화)
- [ ] 신규 배포 직후 **관찰 기간** 운영(자동주문 제한/감시 강화)
- [ ] 예상치 못한 주문 시 **즉시 일시정지** & 원인 분석 리포트
- [ ] 지표/전략 변경 시 **백테스트 + 소액 파일럿** 후 본격 반영

---

### 부록 B) **디렉터리 예시**
```
/app
  ├─ core/           # 전략, 리스크, 신호엔진
  ├─ exchange/       # API 래퍼(시세/주문/체결)
  ├─ data/           # DB, 마이그레이션, 백업
  ├─ backtest/       # 백테스트 엔진/리포트
  ├─ ui/             # 웹 대시보드(or TUI)
  ├─ configs/        # 파라미터, 시크릿 샘플
  └─ jobs/           # 동기화/스케줄러/헬스체크
```

---

> ⚠️ **면책**: 본 문서는 개인 자동매매 시스템 구축을 위한 기술 체크리스트입니다. 실제 운용은 개인 책임 하에 수행되며, 시장/시스템 리스크에 따른 손실 가능성이 있습니다.
